# Base configuration of test cz geometry
# don't make any changes here but use config_update in config.yml / config_di.yml

total_mass: 216.85e-3  # kg, CsI Experiment #2

mesh:
  size_factor: 1.5
  order: 1
  dimension: 3
  optimize: Netgen
afterheater_bot:
  r_out: 0.03
  r_in: 0.0225
  h: 0.04
  T_init: 800
  material: graphite-FU8957
afterheater_top:
  r_out: 0.03
  r_in: 0.0225
  h: 0.044
  T_init: 750
  material: graphite-FU8957
afterheater_cover:
  r_out: 0.03
  r_in: 0.01
  h: 0.006
  T_init: 700
  material: graphite-FU8957

axis_bt:
  r_in: 0.0075  # measured
  r_out: 0.02  # measured
  h: 0.020 # variable
  overlap: 0.015
  T_init: 400
  material: steel-1.4541
  char_l: 0.007
axbot_adapter:
  T_init: 500
  material: graphite-FU8957
  overlap: 0.005
  cylinders:
    - r_in: 0.02
      r_out: 0.03
      h: 0.015
    - r_in: 0
      r_out: 0.05
      h: 0.01
  char_l: 0.007
axis_top:
  r: 0.02
  T_init: 450
  material: steel-1.4541
  char_l: 0.007
axtop_adapter:
  r_out: 0.01
  r_in: 0.004
  h: 0.018
  overlap: 0.018  # with shaft
  T_init: 500
  material: steel-1.4541
  char_l: 0.005
crucible:
  h: 0.055
  r_in: 0.0225
  r_out: 0.03
  t_bt: 0.01
  T_init: 900
  material: graphite-FU8957
  char_l: 0.005
# crystal:
#   l: 0.03  # variable
#   r: 0.01  # variable
#   T_init: 490
#   material: csi-solid
# crystal:
#   r: 0.01  # variable
#   r_seed: 0.004
#   l_body: 0.03  # variable
#   l_conus: 0.005
#   T_init: 850
#   material: csi-solid
crystal:
  # in separate coordinate system [r, z] with z=0 at seed, positive in downward direction
  # points generated with evaluation/crystal_surface_spline.py 
  surface_points:
    - - 0.0
      - 0.0
    - - 0.004
      - 0.0
    - - 0.004
      - 0.028
    - - 0.0048584863367964705
      - 0.02836888214850236
    - - 0.005675791856038333
      - 0.0288199461915329
    - - 0.006447419451404053
      - 0.029346543450065328
    - - 0.007168872016572097
      - 0.029942025245073323
    - - 0.007835652445220928
      - 0.030599742897530598
    - - 0.008443263631029015
      - 0.03131304772841085
    - - 0.00898720846767482
      - 0.03207529105868777
    - - 0.009462989848836813
      - 0.03287982420933507
    - - 0.00986611066819345
      - 0.03371999850132644
    - - 0.010192073819423204
      - 0.03458916525563557
    - - 0.01043638219620454
      - 0.03548067579323619
    - - 0.010594538692215919
      - 0.03638788143510196
    - - 0.01066212644767428
      - 0.03730414193751208
    - - 0.010639615154016976
      - 0.03822333071818248
    - - 0.010535090209147075
      - 0.039140121737901046
    - - 0.010357297006170121
      - 0.04004925833441884
    - - 0.01011498093819166
      - 0.04094548384548691
    - - 0.009816887398317242
      - 0.04182354160885629
    - - 0.009472447599438346
      - 0.04267935397873801
    - - 0.00909622776787205
      - 0.04351767108811969
    - - 0.008705121890555776
      - 0.04434724480359672
    - - 0.008316035508461815
      - 0.04517684685470451
    - - 0.007945874162562453
      - 0.04601524897097846
    - - 0.00761137759144261
      - 0.046871049679638524
    - - 0.007323865833282563
      - 0.04774718592079377
    - - 0.00708816044461875
      - 0.04863980611910632
    - - 0.006908699192176933
      - 0.049544657780500496
    - - 0.006789919842682878
      - 0.050457488410900614
    - - 0.006736104662459025
      - 0.05137407794556676
    - - 0.006745763885289362
      - 0.052291410066998355
    - - 0.006810063915109252
      - 0.05320800000050012
    - - 0.0069196955691346014
      - 0.05412246215415109
    - - 0.007065349664581318
      - 0.05503341093603033
    - - 0.007237717018665309
      - 0.05593946075421685
    - - 0.007428535132587854
      - 0.05683955758879773
    - - 0.007634663722478356
      - 0.05773427005201336
    - - 0.007854526940542339
      - 0.0586246623433287
    - - 0.00808654932748516
      - 0.05951179878527881
    - - 0.008329155424012186
      - 0.060396743700398825
    - - 0.008580724552299163
      - 0.06128056369587235
    - - 0.008836586084278869
      - 0.06216447947642302
    - - 0.00908713738729797
      - 0.06304996093437218
    - - 0.009322326724284093
      - 0.06393850065286584
    - - 0.009532102358164858
      - 0.06483159121505001
    - - 0.009706412551867882
      - 0.0657307252040707
    - - 0.00983621993568802
      - 0.06663719348360807
    - - 0.009922883863280762
      - 0.06755021940063183
    - - 0.0099738631418054
      - 0.06846781335053001
    - - 0.009996694103101396
      - 0.06938797031195149
    - - 0.009998847208934913
      - 0.07030869410460049
    - - 0.009983897056062846
      - 0.07122851144965019
    - - 0.009949411824753769
      - 0.07214675524713192
    - - 0.009892446756511523
      - 0.07306282724351634
    - - 0.009810057092839943
      - 0.07397612918527406
    - - 0.009699449595442023
      - 0.07488608554470698
    - - 0.009562942928110853
      - 0.07579288750525924
    - - 0.009409078080331517
      - 0.07669765950894554
    - - 0.009246772340076035
      - 0.0776015824370937
    - - 0.009084942995316434
      - 0.07850583717103161
    - - 0.00893223861052439
      - 0.07941156394267168
    - - 0.008789560731436823
      - 0.08031873110360259
    - - 0.00864907863041814
      - 0.08122598608704445
    - - 0.008502494919655589
      - 0.08213190573520714
    - - 0.008341512211336432
      - 0.08303506689030042
    - - 0.008158224378489393
      - 0.08393411504727558
    - - 0.007954461749139444
      - 0.08482940411208684
    - - 0.00774221932978322
      - 0.08572307154009623
    - - 0.007533969082195312
      - 0.08661733847581606
    - - 0.007342182968150324
      - 0.08751442606375857
    - - 0.007179019495847773
      - 0.08841649716866047
    - - 0.007047908863174708
      - 0.08932409181855325
    - - 0.006942615136336269
      - 0.09023595283757373
    - - 0.0068564007510694466
      - 0.09115072978274194
    - - 0.0067825281431112385
      - 0.09206707221107793
    - - 0.006714493003436498
      - 0.09298366765555115
    - - 0.0066505171683331294
      - 0.0938999731060422
    - - 0.0065932188542367
      - 0.09481616132075123
    - - 0.00654538347160956
      - 0.09573243227849712
    - - 0.006509796430914059
      - 0.09664898595809879
    - - 0.006488968816679375
      - 0.09756600934695427
    - - 0.006481573440951686
      - 0.09848350766104676
    - - 0.006483459017480791
      - 0.09940135237381104
    - - 0.006490408774083496
      - 0.1003194118574246
    - - 0.006498205938576604
      - 0.10123755448406492
    - - 0.006502819098088362
      - 0.10215565416494532
    - - 0.0065020386454458035
      - 0.10307363925174358
    - - 0.006494689384548318
      - 0.1039914690071284
    - - 0.006479608005521155
      - 0.10490910304896085
    - - 0.006455631198489571
      - 0.10582650099510214
    - - 0.00642203560933236
      - 0.10674363453834666
    - - 0.006381238531886855
      - 0.10766056156905339
    - - 0.006337022653766277
      - 0.10857737745189225
    - - 0.006293176247732293
      - 0.10949417770482203
    - - 0.006253487586546566
      - 0.11041105784580145
    - - 0.006221744942970758
      - 0.1113281133927893
    - - 0.006201736589766535
      - 0.1122454398637443
    - - 0.006197250799695558
      - 0.11316313277662526
    - - 0.006212075845519493
      - 0.11408128764939093
    - - 0.00625
      - 0.115
  current_length: 0.087  # max 0.087
  seed_length: 0.028  # will not be considered in current length
  T_init: 850
  material: csi-solid
  char_l: 0.002

exhaust_hood:
  T_init: 400
  material: steel-1.4541
  char_l: 0.001
  points:
    - [90.e-3, 225.e-3] # x1, x2
    - [90.918e-3, 225.397e-3] # x1 + t * cos(a), y1 + t * sin(a); t=1mm, a=24.3Â°
    - [25.918e-3, 375.397e-3]
    - [25.e-3, 375.e-3]
  char_l: 0.007

filling:
  T_init: 353.15
  material: air
  char_l: 0.1
inductor_measurement_calliper:  # Z:\Gruppen\nemocrys\Private\Equipment\Test_CZ\2022-10-11_Spulengeometrie
  T_init: 293.15
  material: copper-inductor
  radius_pipe: 0.005
  char_l: 0.002
  spline_points: [  # coil center points using cylindrical coordinates [r, phi, h]
    [0.2, 0, 0.03075],
    [0.1315, 0, 0.03075],
    [0.092, 0, 0.03075],
    [0.091, 0, 0.03075],
    [0.090, 0, 0.03075],
    [0.075, 15, 0.0597],
    [0.075, 16, 0.059846666],  # manually inserted points to get better spline quality
    [0.075, 17, 0.059993333],  # manually inserted points to get better spline quality
    # [0.075, 30, 0.0619],  # only use half of the measured values to get smoother spline
    [0.075, 45, 0.065],
    # [0.075, 60, 0.0685],
    [0.075, 75, 0.0712],
    # [0.075, 90, 0.0737],
    [0.075, 105, 0.0738],
    # [0.075, 120, 0.0739],
    [0.075, 135, 0.0723],
    # [0.075, 150, 0.0704],
    [0.075, 165, 0.0679],
    # [0.075, 180, 0.0665],
    [0.075, 195, 0.0639],
    # [0.075, 210, 0.0621],
    [0.075, 225, 0.0611],
    # [0.075, 240, 0.0604],
    [0.075, 255, 0.0605],
    # [0.075, 270, 0.0610],
    [0.075, 285, 0.0619],
    # [0.075, 300, 0.0642],
    [0.075, 315, 0.0663],
    # [0.075, 330, 0.0687],
    [0.075, 345, 0.0718],
    # [0.075, 360, 0.0748],
    [0.075, 15, 0.0790],
    # [0.075, 30, 0.0820],
    [0.075, 45, 0.0845],
    # [0.075, 60, 0.0871],
    [0.075, 75, 0.0890],
    # [0.075, 90, 0.0908],
    [0.075, 105, 0.0905],
    # [0.075, 120, 0.0907],
    [0.075, 135, 0.0898],
    # [0.075, 150, 0.0887],
    [0.075, 165, 0.0872],
    # [0.075, 180, 0.0865],
    [0.075, 195, 0.0843],
    # [0.075, 210, 0.0825],
    [0.075, 225, 0.0810],
    # [0.075, 240, 0.0796],
    [0.075, 255, 0.0791],
    # [0.075, 270, 0.0792],
    [0.075, 285, 0.0796],
    # [0.075, 300, 0.0816],
    [0.075, 315, 0.0838],
    # [0.075, 330, 0.0863],
    [0.075, 345, 0.0896],
    # [0.075, 360, 0.0927],
    [0.075, 15, 0.0969],
    # [0.075, 30, 0.0996],
    [0.075, 45, 0.1024],
    # [0.075, 60, 0.1053],
    [0.075, 75, 0.1073],
    # [0.075, 90, 0.1092],
    [0.075, 105, 0.1089],
    # [0.075, 120, 0.1091],
    [0.075, 135, 0.1080],
    # [0.075, 150, 0.1067],
    [0.075, 165, 0.1048],
    # [0.075, 180, 0.1038],
    [0.075, 195, 0.1013],
    # [0.075, 210, 0.0999],
    [0.075, 225, 0.0985],
    # [0.075, 240, 0.0978],
    [0.075, 255, 0.0978],
    # [0.075, 270, 0.0983],
    [0.075, 285, 0.0995],
    # [0.075, 300, 0.1019],
    [0.075, 315, 0.1047],
    # [0.075, 330, 0.1075],
    [0.075, 343, 0.10966666],  # manually inserted points to get better spline quality
    [0.075, 344, 0.10983333],  # manually inserted points to get better spline quality
    [0.075, 345, 0.1100],
    [0.09, 360, 0.13315],
    [0.091, 360, 0.13315],
    [0.092, 360, 0.13315],
    [0.1315, 360, 0.13315],
    [0.2, 360, 0.13315],
  ]

insulation_bot:
  T_init: 700
  material: insulation
  overlap: 0.005
  cylinders:
    - r_in: 0.05
      r_out: 0.06
      h: 0.005
    - r_in: 0.0
      r_out: 0.06
      h: 0.025
    - r_in: 0.03
      r_out: 0.06
      h: 0.005
  char_l: 0.007
insulation_side:
  r_out: 0.06
  r_in: 0.04
  h: 0.15
  T_init: 700
  material: insulation
  char_l: 0.007
insulation_side_two_rings:
  r_out: 0.06
  r_in: 0.04
  h: 0.075
  T_init: 700
  material: insulation
  char_l: 0.007
insulation_top:
  r_out: 0.06
  r_in: 0.01
  h: 0.02
  T_init: 700
  material: insulation
  char_l: 0.007
melt:
  h: 0.02  # will be overwritten if parameter "total_mass" is given
  T_init: 900
  material: csi-liquid
  char_l: 0.005
seedholder:
  r_out: 0.0075
  r_in: 0.004
  h: 0.025
  overlap: 0.008  # with seed
  T_init: 800
  material: steel-1.4541
  char_l: 0.003
shaft_al2o3:
  r_out: 0.004
  r_in: 0
  h: 0.108  # 80 mm + overlaps
  overlap: 0.01  # with seedholder
  material: al2o3
  T_init: 500
  char_l: 0.003
vessel:
  r_in: 0.1315
  h_in: 0.383
  t: 0.005
  T_init: 293.15
  material: steel-1.4541
  char_l: 0.01
surrounding_temp:
  X0: [0, -0.5]
  r: 0.1365
  h: 1
cutbox:
  X0: [0, -0.5]
  r: 0.3
  h: 1

# interface shapes based on input for last elmer iteration in
# num-topas - T-coupling - 2023-09-28_06-02_qt_csi-exp-2_1mm-steps_relax-0.5_conv-5e-5
phase_if_length=0.01:
- - 0.0106450846109
  - 0.0403420357202
- - 0.0104969253795
  - 0.0403322157339404
- - 0.0103487782014
  - 0.0403223584270407
- - 0.0102014486783
  - 0.0403035387175552
- - 0.0100541206456
  - 0.0402846740108957
- - 0.00990752395289
  - 0.0402605248537075
- - 0.0097609333922
  - 0.0402363295264889
- - 0.00961497870245
  - 0.0402083570731066
- - 0.00946903328098
  - 0.0401803390237485
- - 0.00932364384921
  - 0.0401493899971742
- - 0.00917826614983
  - 0.0401183956744336
- - 0.00903339295421
  - 0.0400849749264925
- - 0.00888853339265
  - 0.0400515092118998
- - 0.00874414063438
  - 0.0400159593687664
- - 0.0085997631228
  - 0.0399803650291329
- - 0.00845582019593
  - 0.039942941453538
- - 0.00831189397146
  - 0.0399054740275693
- - 0.00816837471033
  - 0.0398663735895748
- - 0.00802487328043
  - 0.0398272303997676
- - 0.00788175255024
  - 0.0397866227373576
- - 0.0077386504967
  - 0.039745973802109
- - 0.007595902023289901
  - 0.03970401519692
- - 0.00745317267687
  - 0.0396620173720452
- - 0.007310767933610001
  - 0.0396188535452442
- - 0.0071683822609
  - 0.0395756532044609
- - 0.00702628965898
  - 0.0395314281438793
- - 0.00688421551186
  - 0.0394871699258773
- - 0.006742399165430001
  - 0.0394420290180382
- - 0.00660059985571
  - 0.0393968592208536
- - 0.00645901930307
  - 0.039350953700153
- - 0.00631745360008
  - 0.0393050243132251
- - 0.00617606373409
  - 0.0392585109044626
- - 0.0060346855862
  - 0.0392119795479642
- - 0.00589343564094
  - 0.0391650245649945
- - 0.00575219328072
  - 0.0391180584507877
- - 0.0056110295709
  - 0.0390708352322572
- - 0.00546986829697
  - 0.0390236085212208
- - 0.00532873220302
  - 0.0389763013041812
- - 0.00518759268341
  - 0.0389289989055061
- - 0.00504642189228
  - 0.0388818005355133
- - 0.00490524202838
  - 0.0388346153078141
- - 0.00476397273013
  - 0.03878772588246
- - 0.00462268956484
  - 0.0387408574383281
- - 0.0044812580371
  - 0.0386944828201318
- - 0.00433980878068
  - 0.0386481364504484
- - 0.00419815357423
  - 0.0386024840637178
- - 0.00405647799576
  - 0.0385568661671703
- - 0.00391454340499
  - 0.0385121384008784
- - 0.00377258670758
  - 0.0384674506436244
- - 0.00363032245125
  - 0.0384238421458048
- - 0.00348803527645
  - 0.0383802781854815
- - 0.00334540243503
  - 0.0383379707179095
- - 0.0032027468854
  - 0.0382957109023053
- - 0.00305971333715
  - 0.0382548694754882
- - 0.00291665753295
  - 0.0382140783832964
- - 0.00277320142909
  - 0.0381748512631087
- - 0.00262972397005
  - 0.038135676383353
- - 0.00248582767204
  - 0.0380982094516952
- - 0.00234191181418
  - 0.0380607950655005
- - 0.00219755795677
  - 0.0380252511712297
- - 0.00205318554664
  - 0.0379897617976869
- - 0.0019083483411
  - 0.0379563669704095
- - 0.00176349428979
  - 0.0379230282642011
- - 0.00161812869206
  - 0.0378921366749892
- - 0.00147274783122
  - 0.0378613043542492
- - 0.00132678792504
  - 0.0378334941658182
- - 0.00118081470936
  - 0.0378057474190512
- - 0.00103418287103
  - 0.0377819038057645
- - 0.000887540301291
  - 0.037758127151105
- - 0.00074019128772
  - 0.0377394674425599
- - 0.000592833217332
  - 0.0377208803910374
- - 0.000444830489433
  - 0.0377088219696069
- - 0.000296820942883
  - 0.0376968288144413
- - 0.000148414350659
  - 0.0376926210808761
- - -0.0
  - 0.0376884481721828
phase_if_length=0.087:
- - 0.00625
  - 0.026704809196
- - 0.006105114127749899
  - 0.026671676025128
- - 0.00596025927415
  - 0.0266384897763128
- - 0.00581763578491
  - 0.0265961828157515
- - 0.00567502446699
  - 0.0265538132864465
- - 0.00553367400971
  - 0.0265070521584369
- - 0.0053923371789
  - 0.026460242825634195
- - 0.00525184779928
  - 0.026410662980025798
- - 0.00511137069541
  - 0.0263610480720296
- - 0.00497151792494
  - 0.0263094789104411
- - 0.00483167282363
  - 0.0262578873564908
- - 0.00469228604603
  - 0.0262048966712257
- - 0.00455290062683
  - 0.0261518962672826
- - 0.00441383863889
  - 0.026097924634002
- - 0.00427477114179
  - 0.0260439552412112
- - 0.00413590433496
  - 0.025989378752030005
- - 0.00399702455021
  - 0.0259348156009682
- - 0.00385822476482
  - 0.0258799964732441
- - 0.00371940235659
  - 0.025825202816729304
- - 0.00358053695997
  - 0.025770511754501395
- - 0.00344163823063
  - 0.0257158599469449
- - 0.00330256280001
  - 0.0256616977314261
- - 0.00316344873662
  - 0.0256075855231575
- - 0.00302401176219
  - 0.0255543895892951
- - 0.00288453139464
  - 0.0255012574551213
- - 0.00274457248369
  - 0.0254495276984211
- - 0.00260456589594
  - 0.0253978788231801
- - 0.00246392374783
  - 0.025348167526661195
- - 0.0023232304597
  - 0.0252985570970161
- - 0.00218174696019
  - 0.025251489176801204
- - 0.00204020946513
  - 0.0252045447062566
- - 0.00189774426194
  - 0.0251608093002543
- - 0.0017552234494
  - 0.0251172209053905
- - 0.00161166500086
  - 0.0250775776705844
- - 0.00146805223119
  - 0.0250381025058224
- - 0.00132332895956
  - 0.0250033999948287
- - 0.00117855577662
  - 0.024968881868413503
- - 0.0010326529712
  - 0.024940077027688204
- - 0.000886708290531
  - 0.0249114635932642
- - 0.000739700095684
  - 0.0248896362976206
- - 0.000592661523993
  - 0.024867991038399203
- - 0.000444758831544
  - 0.024854254195341104
- - 0.00029683713862
  - 0.0248406655610819
- - 0.00014842492031
  - 0.024835935015925705
- - 0.0
  - 0.0248312876783531
